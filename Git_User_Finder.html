<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub User Finder</title>
  <style>
    /* Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

body {
  background: #eef2f7;
  color: #333;
  display: flex;
  justify-content: center;
  padding: 40px;
}

/* Container */
.container {
  background: #fff;
  width: 600px;
  padding: 25px 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  transition: 0.3s ease-in-out;
}

.container:hover {
  box-shadow: 0 8px 28px rgba(0,0,0,0.12);
}

/* Heading */
h1 {
  text-align: center;
  margin-bottom: 20px;
  color: #1a73e8;
  font-size: 1.8rem;
}

h2 {
  margin-top: 25px;
  margin-bottom: 10px;
  font-size: 1.3rem;
  color: #444;
  border-left: 4px solid #1a73e8;
  padding-left: 8px;
}

/* Input and Button */
input {
  width: 70%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin-right: 8px;
  font-size: 14px;
  transition: border 0.3s;
}

input:focus {
  outline: none;
  border-color: #1a73e8;
}

button {
  padding: 12px 20px;
  border: none;
  background: #1a73e8;
  color: white;
  font-size: 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s ease;
}

button:hover {
  background: #155ab6;
}

/* Status */
#status {
  margin: 15px 0;
  font-weight: 500;
  color: #555;
}

/* Profile Card */
#profile {
  margin-top: 20px;
  text-align: center;
  padding: 20px;
  border-radius: 10px;
  background: #fafafa;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

#profile img {
  border-radius: 50%;
  border: 3px solid #1a73e8;
  margin-bottom: 10px;
}

#profile h3 {
  margin-top: 10px;
  font-size: 1.2rem;
  color: #222;
}

#profile p {
  color: #666;
  font-size: 14px;
  margin-bottom: 10px;
}

#profile a {
  text-decoration: none;
  color: #1a73e8;
  font-weight: 500;
}

#profile a:hover {
  text-decoration: underline;
}

/* Repo List */
.repo {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fdfdfd;
  padding: 10px 15px;
  margin: 8px 0;
  border-radius: 8px;
  border: 1px solid #e5e5e5;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.repo:hover {
  transform: translateY(-2px);
  box-shadow: 0 3px 8px rgba(0,0,0,0.08);
}

.repo span {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.repo button {
  background: #ff9800;
  padding: 6px 12px;
  font-size: 13px;
  border-radius: 6px;
}

.repo button:hover {
  background: #e68900;
}

/* Starred List */
#starred {
  list-style: none;
  margin-top: 10px;
}

#starred li {
  background: #e8f0fe;
  padding: 8px 12px;
  border-radius: 6px;
  margin: 5px 0;
  font-size: 14px;
  color: #1a73e8;
  font-weight: 500;
}
  </style>
</head>
<body>
  <div class="container">
    <h1>GitHub User Finder</h1>

    <input type="text" id="username" placeholder="Enter GitHub username">
    <button id="searchBtn">Search</button>

    <div id="status"></div>
    <div id="profile"></div>
    <div id="repos"></div>

    <h2>Starred Repositories</h2>
    <ul id="starred"></ul>
  </div>
  <script>
    // ✅ Closure to manage starred repositories
function createStarredManager() {
  let starred = []; // private variable

  return {
    addRepo: function(repo) {
      if (!starred.includes(repo)) {
        starred.push(repo);
        renderStarred();
      }
    },
    getRepos: function() {
      return starred;
    }
  };
}

const starredManager = createStarredManager();

document.getElementById("searchBtn").addEventListener("click", () => {
  const username = document.getElementById("username").value.trim();
  if (!username) {
    updateStatus("Please enter a username", () => {});
    return;
  }

  updateStatus("Fetching profile...", () => {
    fetchProfile(username);
  });
});

// ✅ Callback example: update status and then call next action
function updateStatus(message, callback) {
  const statusDiv = document.getElementById("status");
  statusDiv.innerText = message;
  if (callback) callback();
}

// ✅ Promise example: Fetch profile with .then()
function fetchProfile(username) {
  fetch(`https://api.github.com/users/${username}`)
    .then(res => {
      if (!res.ok) throw new Error("User not found");
      return res.json();
    })
    .then(data => {
      renderProfile(data);
      fetchRepos(username); // Fetch repos after profile
    })
    .catch(err => {
      updateStatus(`Error: ${err.message}`);
    });
}

// ✅ Async/Await example: Fetch repositories
async function fetchRepos(username) {
  try {
    updateStatus("⏳ Fetching repositories...");
    const res = await fetch(`https://api.github.com/users/${username}/repos`);
    if (!res.ok) throw new Error("Repos not found");
    const data = await res.json();
    renderRepos(data);
    updateStatus("Data loaded successfully!");
  } catch (error) {
    updateStatus(`Error: ${error.message}`);
  }
}

// Render profile
function renderProfile(user) {
  const profileDiv = document.getElementById("profile");
  profileDiv.innerHTML = `
    <img src="${user.avatar_url}" width="100" height="100">
    <h3>${user.name || "No Name"}</h3>
    <p>${user.bio || "No bio available"}</p>
    <a href="${user.html_url}" target="_blank">View Profile</a>
  `;
}

// Render repos
function renderRepos(repos) {
  const reposDiv = document.getElementById("repos");
  reposDiv.innerHTML = "<h2>Repositories</h2>";
  repos.forEach(repo => {
    const repoDiv = document.createElement("div");
    repoDiv.classList.add("repo");
    repoDiv.innerHTML = `
      <span>${repo.name}</span>
      <button onclick="starredManager.addRepo('${repo.name}')">⭐ Star</button>
    `;
    reposDiv.appendChild(repoDiv);
  });
}

// Render starred repos
function renderStarred() {
  const starredUl = document.getElementById("starred");
  starredUl.innerHTML = "";
  starredManager.getRepos().forEach(repo => {
    const li = document.createElement("li");
    li.innerText = repo;
    starredUl.appendChild(li);
  });
}
  </script>
</body>
</html>